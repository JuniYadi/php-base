location ~ ^/index\.php(/|$) {
    fastcgi_pass 127.0.0.1:9000;
    fastcgi_param SCRIPT_FILENAME $realpath_root$fastcgi_script_name;
    include fastcgi_params;
    fastcgi_hide_header X-Powered-By;

    # Preserve forwarding headers for app/framework trusted proxy logic.
    fastcgi_param HTTP_X_FORWARDED_PROTO $http_x_forwarded_proto if_not_empty;
    fastcgi_param HTTP_X_FORWARDED_HOST $http_x_forwarded_host if_not_empty;
    fastcgi_param HTTP_X_FORWARDED_PORT $http_x_forwarded_port if_not_empty;
    fastcgi_param HTTP_X_FORWARDED_FOR $http_x_forwarded_for if_not_empty;

    # FastCGI tuning
    fastcgi_connect_timeout 60s;
    fastcgi_send_timeout 60s;
    fastcgi_read_timeout 60s;
    fastcgi_buffer_size 128k;
    fastcgi_buffers 4 256k;
    fastcgi_busy_buffers_size 256k;
    fastcgi_temp_file_write_size 256k;
    fastcgi_intercept_errors on;
}
